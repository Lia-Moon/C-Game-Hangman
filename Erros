#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* Declaração de variáveis globais, utilizadas em todo o código e fora de todas as outras funções
   Desta forma, não preciso declarar em cada uma das funções:
   ex: void chuta(char chutes[26], int* tentativas){ ----->  void chuta(){
   Tomar cuidado ao utilizar variáveis globais, pq perde um pouco o controle sobre a variável pois qualquer linha pode alterá-la
*/
char palavrasecreta[20]; // array de 10 posições
char chutes[26]; // Quantas vezes a pessoa pode chutar, número de letras do alfabeto
int tentativas=0; // Quantos chutes a pessoa já deu

// Funções

void abertura() {
	printf("\n************\n");
	printf("*       Jogo de Forca       *\n");
	printf("**********\n\n");
}

void chuta(){
	char chute;

	printf("Digite uma letra: ");
	scanf(" %c", &chute); // Colocar um espaço antes do %c para ele não entender que o enter é um char

	chutes[tentativas] = chute; // Aqui tentativas deixou de ser um ponteiro pois já agora é uma variável global
	tentativas++;
}

int jachutou(char letra){
	// a letra já foi chutada?
	int achou=0;

	for(int j=0; j < tentativas; j++){
		if(chutes[j] == letra){
			achou=1;
			break;
		}
	}

	return achou;
}

void desenhaforca(){
	// imprime a palavra secreta
	int achou; // booleano

	for(int i=0; i<strlen(palavrasecreta); i++){ // strlen irá contar o número de letras até o /0 que indica o final da palavra
		achou=0;

		int achou = jachutou(palavrasecreta[i]);

		if(achou){
			printf("%c ", palavrasecreta[i]);
		} else{
			printf("_ ");
		}
	}
	printf("\n\n");
}

void escolhepalavra(){
	sprintf(palavrasecreta, "MELANCIA"); // string printf, parâmetro e palavra utilizada
}

int enforcou(){

	int existe, erros=0; 
	for(int i=0; i<tentativas; i++){

		existe = 0;

		for(int j=0; j<strlen(palavrasecreta); j++){
			if(chutes[i] == palavrasecreta[j]){

				existe = 1;
				break;
			}
		}

		if(!existe) erros++;
	}

	return erros >= 5;
}

int main() {
	
	int acertou = 0;

	escolhepalavra(palavrasecreta);
	abertura();

	do {

		desenhaforca(palavrasecreta, chutes, tentativas);

		chuta(chutes, &tentativas); // Passando os dois parâmetros para a função chuta(), &tentativas está passando o local onde a info está gravada


	} while(!acertou && !enforcou()); // booleanos (0 é negativo e 1 é positivo) o ! nega uma variação booleana; invoca as variáveis



	system("pause");
	return 0;
}
